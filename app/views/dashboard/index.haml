- content_for :title do
  = react_component('PageTitle', {clientName: @client.business_name ? @client.business_name : @client.contact_name, client: @client}, {server_side: false})

/ If customer has existing invoices, show up here
.site-or-invoice-group
  .ui.grid
    .two.column.row
      .left.floated.column
        %h2 Websites Summary
      .right.floated.right.aligned.column
        = link_to "My Sites", client_websites_path(current_client), class: "ui basic button #{"disabled" if current_client.websites.empty?}"
  - if @websites.nil? || @websites.empty?
    = render :partial => 'layouts/none_yet', locals: {type: "websites"}       
  - @websites.each do |website|
    = render :partial => 'layouts/website_simple', locals: {subscription: website.stripe_subscription_id ? Stripe::Subscription.retrieve(website.stripe_subscription_id) : nil, website: website}

.site-or-invoice-group
  .ui.grid
    .two.column.row
      .left.floated.column
        %h2 Invoice Summary
      .right.floated.right.aligned.column
        = link_to "My Invoices", index_invoices_client_path(current_client), class: "ui basic button #{"disabled" if current_client.stripe_account_id.nil?}"


  - if @upcoming


    %ul.latest-charges

    
      %h5.pad-left Upcoming Invoices
      - invoice = @upcoming
      %li.charge.upcoming
        .ui.right.aligned.grid
          .center.aligned.one.wide.column  
            %i.ui.icon.calendar.outline
          .right.aligned.fifteen.wide.column
            .ui.right.aligned.grid
              .left.floated.left.aligned.six.wide.column
                .ui.items
                  .ui.item
                    .content
                      .header
                        Invoice for
                        = invoice.lines.data.first.plan.name                      
                      .meta
                        %span
                          = Time.at(invoice.date).to_date 
              .right.floated.right.aligned.six.wide.column
                .ui.items
                  .ui.item
                    .content
                      .header
                        $ #{Money.new(invoice.amount_due, @client_currency)}
                      .meta
                        %span
                          = Time.at(invoice.date).to_date          
      %h5.pad-left Latest
      - invoice = @invoices.data.shift
      %li.charge.active-charge{class: invoice.paid ? "paid" : ""}
        .ui.right.aligned.grid
          .center.aligned.one.wide.column
            %i.ui.icon.checkmark.green
          .right.aligned.fifteen.wide.column
            .ui.right.aligned.grid
              .left.floated.left.aligned.six.wide.column
                .ui.items
                  .ui.item
                    .content
                      .header
                        Invoice for
                        = invoice.lines.data.first.plan.name                      
                      .meta
                        %span
                          = Time.at(invoice.date).to_date 
              .right.floated.right.aligned.six.wide.column
                .ui.items
                  .ui.item
                    .content
                      .header
                        $ #{Money.new(invoice.amount_due, @client_currency)}
                      .meta
                        %span
                          = Time.at(invoice.date).to_date  


      %h5.pad-left Completed
      / - @invoices.data.each do |invoice|
      %li.charge.paid.inactive
        .ui.right.aligned.grid
          .center.aligned.one.wide.column
            %i.ui.icon.checkmark.green
          .right.aligned.fifteen.wide.column
            .ui.right.aligned.grid
              .left.floated.left.aligned.six.wide.column
                .ui.items
                  .ui.item
                    .content
                      .header
                        Invoice for
                        = invoice.lines.data.first.plan.name                      
                      .meta
                        %span
                          = Time.at(invoice.date).to_date 
              .right.floated.right.aligned.six.wide.column
                .ui.items
                  .ui.item
                    .content
                      .header
                        $ #{Money.new(invoice.amount_due, @client_currency)}
                      .meta
                        %span
                          = Time.at(invoice.date).to_date  
  - if @upcoming
    .site-or-invoice-group
      .ui.grid
        .two.column.row
          .left.floated.column
            / %h2 Invoice Summary
          .right.floated.right.aligned.column
            = link_to "View More Invoices", index_invoices_client_path(current_client), class: "ui basic button #{"disabled" if current_client.stripe_account_id.nil?}"                         


  - else
    = render :partial => 'layouts/none_yet', locals: {type: "invoices"}       